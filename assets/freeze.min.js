(function($){$.fn.freezeGridView=function(method,settings){if(methods[method]&&settings){return methods[method].apply(this,[settings])}else if(!method&&settings){return methods.init.apply(this,arguments)}
    $.error('Method '+method+' does not exist in jQuery.freezeGridView');return!1};$(document).on('pjax:success',function(event){jQuery(settings.container).freezeGridView('init',settings)});var defaults={freezeLeftColumns:['id'],freezeRightColumns:['action'],container:'#w0-container'};var settings={};var freezeLeft={};var gridEvents={startScroll:'startScroll',endScroll:'endScroll'};var gridEventHandlers={};var methods={init:function(options){return this.each(function(){var $container=$(this);settings=$.extend(!0,options,defaults);methods.initRightColumnsFreeze();$.each(settings.freezeLeftColumns,function(index,value){var cell=$('thead > tr> th[data-col-seq="'+value+'"]');freezeLeft[value]=Math.round(cell.offsetRelative('.kv-grid-table').left)});var filterEvents='scroll.freezeGridView';initEventHandler($container,'scrolling',filterEvents,settings.container,function(event){methods.applyScroll.apply($container);return!1})})},applyScroll:function(options){var $grid=$(this);var id=$grid.attr('id');var event=$.Event(gridEvents.startScroll);$grid.trigger(event);if(event.result===!1){return}
    methods.initLeftColumnsFreeze();$grid.trigger(gridEvents.endScroll)},destroy:function(){var events=['.freezeGridView',gridEvents.startScroll,gridEvents.endScroll].join(' ');this.off(events);var id=$(this).attr('id');$.each(gridEventHandlers[id],function(type,data){$(document).off(data.event,data.selector)});return this},data:function(){var id=$(this).attr('id')},initLeftColumnsFreeze:function(){var container=$(settings.container);var scrollLeft=Math.round(container.get(0).scrollLeft);$.each(settings.freezeLeftColumns,function(index,value){$.each($('td[data-col-seq="'+value+'"] ,th[data-col-seq="'+value+'"]'),function(index,obj){$(obj).removeClass('freeze free');if(scrollLeft<=1){$(obj).addClass('free')}else{$(obj).addClass('freeze');$(obj).css('left',Math.round(freezeLeft[value])+'px')}})})},initRightColumnsFreeze:function(){var right=0;$.each(settings.freezeRightColumns,function(index,value){$.each($('td[data-col-seq="'+value+'"] ,th[data-col-seq="'+value+'"]'),function(index,obj){$(obj).addClass('freeze');$(obj).css('right',right+'px')});right+=parseInt($('td[data-col-seq="action"]:first').css('width'))})}};function initEventHandler($gridView,type,event,selector,callback){var id=$gridView.attr('id');var prevHandler=gridEventHandlers[id];if(prevHandler!==undefined&&prevHandler[type]!==undefined){var data=prevHandler[type];$(selector).off(data.event,data.selector)}
    if(prevHandler===undefined){gridEventHandlers[id]={}}
    $(selector).on(event,callback);gridEventHandlers[id][type]={event:event,selector:selector}}})(window.jQuery);(function($){$.fn.offsetRelative=function(top){var $this=$(this);var $parent=$this.offsetParent();var offset=$this.position();if(!top)return offset;else if($parent.get(0).tagName=="BODY")return offset;else if($(top,$parent).length)return offset;else if($parent[0]==$(top)[0])return offset;else{var parent_offset=$parent.offsetRelative(top);offset.top+=parent_offset.top;offset.left+=parent_offset.left;return offset}};$.fn.positionRelative=function(top){return $(this).offsetRelative(top)}}(jQuery))